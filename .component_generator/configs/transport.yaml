---
Name: transport
CapsName: Transport

di_go:
  Imports: ""
  Consts: |-
    cliArgAddresses = "transport_address"

  ProvideFlags:
    Plugin:
      Usage: "Transport mechanism used; http"

    Body: |-
      if err := c.Add(
        cli.Name(cli.PrefixName(cliConfig.Cli.ArgPrefix, cliArgAddresses)),
        cli.Usage("List of transport addresses"),
        cli.Default(config.Transport.Addresses),
        cli.EnvVars(cli.PrefixEnv(cliConfig.Cli.ArgPrefix, cliArgAddresses)),
      ); err != nil {
        return DiFlags{}, err
      }

  ProvideConfig:
    Body: |-
      if f, ok := c.Get(cliArgAddresses); ok {
        defConfig.Transport.Addresses = cli.FlagValue(f, []string{})
      }
  Provide:
    Args: ""
    Body: |-
      if len(config.Transport.Addresses) > 0 {
        opts = append(opts, Addrs(config.Transport.Addresses...))
      }

config_store_go:
  NewConfig:
    Enabled: "true"
    Plugin: "http"
    Fields: |-
      Addresses: []string{},

  Config:
    Fields: |-
      Addresses []string `json:"addresses,omitempty" yaml:"Addresses,omitempty"`

  ConfigMerge:
    Fields: |-
      d.Transport.Addresses = src.Transport.Addresses
